fluentd:
  image:
    repository: namcnab/fluentd-elasticsearch
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 24224 # Set a valid port number for Fluentd
    protcol: UDP
  volumeMounts:
    - name: fluentd-config
      mountPath: /fluentd/etc # Mount the directory instead of the file
    - name: log-server
      mountPath: /app/logs
  volumes:
    - name: fluentd-config
      configMap:
        name: fluentd-config
    - name: log-server
      persistentVolumeClaim:
        claimName: log-server-pvc
serviceAccount:
  create: true # Ensure a ServiceAccount is created
  name: "" # Leave empty to use the default name generated by the chart
ingress:
  enabled: false # Set to true if you want to enable ingress
  annotations: {} # Add ingress annotations if needed
  hosts:
    - host: "" # Specify the hostname for the ingress (e.g., elasticsearch.local)
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: [] # Configure TLS if needed
autoscaling:
  enabled: false # Set to true if you want to enable autoscaling
  minReplicas: 1 # Minimum number of replicas
  maxReplicas: 5 # Maximum number of replicas
  targetCPUUtilizationPercentage: 80 # Target CPU utilization for scaling
  targetMemoryUtilizationPercentage: 80 # Target memory utilization for scaling
extraInitContainers:
  - name: wait-for-elasticsearch
    image: curlimages/curl:latest
    command:
      - sh
      - -c
      - |
        until curl -s http://elasticsearch-master.observability.svc.cluster.local:9200/_cluster/health | grep '"status":"green"' > /dev/null; do
          echo "Waiting for Elasticsearch to be ready..."
          sleep 5
        done
    resources:
      requests:
        memory: "50Mi"
        cpu: "10m"
      limits:
        memory: "100Mi"
        cpu: "50m"
